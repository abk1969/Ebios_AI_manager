rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // üîß R√àGLES TEMPORAIRES POUR LES TESTS
    // ATTENTION: Ces r√®gles permettent l'acc√®s libre - √† utiliser uniquement pour les tests

    // Collection de test - acc√®s libre temporaire
    match /_test/{document} {
      allow read, write: if true;
    }
    
    // Collections principales EBIOS RM - acc√®s libre temporaire pour les tests
    match /missions/{missionId} {
      allow read, write: if true;

      // Sous-collections de la mission
      match /{subcollection}/{document} {
        allow read, write: if true;
      }
    }

    // Biens essentiels
    match /businessValues/{document} {
      allow read, write: if true;
    }

    // Biens supports
    match /supportingAssets/{document} {
      allow read, write: if true;
    }

    // √âv√©nements redout√©s
    match /dreadedEvents/{document} {
      allow read, write: if true;
    }

    // Sources de risque
    match /riskSources/{document} {
      allow read, write: if true;
    }

    // Sc√©narios strat√©giques
    match /strategicScenarios/{document} {
      allow read, write: if true;
    }

    // Sc√©narios op√©rationnels
    match /operationalScenarios/{document} {
      allow read, write: if true;
    }

    // Mesures de s√©curit√©
    match /securityMeasures/{document} {
      allow read, write: if true;
    }

    // M√©triques et rapports
    match /metrics/{document} {
      allow read, write: if true;
    }

    // Logs et audit
    match /auditLogs/{document} {
      allow read, write: if true;
    }

    // Configuration et param√®tres
    match /config/{document} {
      allow read, write: if true;
    }

    // Utilisateurs et profils
    match /users/{userId} {
      allow read, write: if true;
    }

    // R√®gle par d√©faut - acc√®s libre temporaire pour les tests
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
